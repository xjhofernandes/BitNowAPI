@{
    ViewData["Title"] = "Ínicio";
}

<h1 class="topo">bitCoin Now</h1>

<hr />

<div id="info">
    <form id="formulario">
        <input type="text" id="bitPreco" value="1" onChange="atualizarPreco()" name="fname" pattern="\([0-9]{2}\)[\s][0-9]{4}-[0-9]{4,5}">
        <label for="fname">BTC</label>
        =
        <input type="text" id="valorDolar" name="lname" @*disabled="disabled"*@>
        <label for="lname">Dolar</label>
    </form>
</div>


@section Scripts
{
    <script type="text/javascript">

        function getPrecoBit() {
            var value = $.ajax({ 
                  url: 'home/get', 
                   async: false
            }).responseText;
            return JSON.parse(value);
        };

        function atualizarPreco() {
            var bit = document.getElementById('bitPreco').value;
            if (bit != 0) {
                $("#valorDolar").val(bit * getPrecoBit().data.amount);
            }
            else {
                $("#valorDolar").val(getPrecoBit().data.amount);
            }
            document.title = getPrecoBit().data.amount + " USD - bitNow";
        };

        setInterval(function() {
            atualizarPreco()
          }, 15000);

        window.onload = atualizarPreco;

    </script>
}